@section Styles
	{
	<link href="~/font-awesome/css/all.min.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/barfiller.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/bootstrap.min.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/elegant-icons.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/flaticon.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/magnific-popup.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/nice-select.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/slicknav.min.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/style.css" rel="stylesheet" />
	<link href="~/orderforhere/startordercss/owl.carousel.min.css" rel="stylesheet" />
	<link href="~/css/menustyle.css" rel="stylesheet" />
	<style>
		body {
			background-color: rgba(12, 11, 9, 0.3);
		}

		section {
			margin-top: 33px;
		}

		#header {
			margin: 0px;
		}

			#header .cartPrice {
				color: white;
			}

				#header .cartPrice:hover {
					color: orange;
				}
		/*
				.spad{
					margin-bottom: -50px;
				}*/
		i {
			pointer-events: none;
			font-size: 1rem;
		}

		button {
			border: 0;
			background-color: rgba(12, 11, 9, 0.3);
		}

		.btn-primary {
			color: #fff;
			background-color: darkorange;
			border-color: orangered;
		}

			.btn-primary:hover {
				background-color: darkred;
				border-color: firebrick;
			}

		.btninput {
			display: flex;
		}

		input {
			width: 50%;
			border: 0;
			text-align: center;
			background-color: #CCC;
		}

		.card {
			background-color: burlywood
		}

		.card-body {
			display: flex;
			flex-direction: column;
			justify-content: space-between;
		}
	</style>
}

<!-- ======= Header ======= -->
<header id="header" class="fixed-top d-flex align-items-center">
	<div class="container-fluid container-xl d-flex align-items-center justify-content-lg-between">
		<h1 class="logo me-auto me-lg-0"><a href="#">享食點餐趣</a></h1>
		<div class="cart__price" style="color: white;">消費金額: <span style="color: white;">$0.00</span></div>
		<a asp-controller="ShoppingCart" class="cartPrice"><i class="fa fa-shopping-cart" style="font-size: 24px;"></i></a>
	</div>
</header>

<section id="menuItem" class="menu section-bg">
	<div class="row" data-aos="fade-up" data-aos-delay="100">
		<div class="col-lg-12 d-flex justify-content-center">
			<ul id="menu-flters">
				<li data-filter="*" class="filter-active">全部</li>
				<li data-filter=".filter-appetizer">前菜</li>
				<li data-filter=".filter-soups">湯品</li>
				<li data-filter=".filter-mainMeal">主餐</li>
				<li data-filter=".filter-snacks">點心</li>
				<li data-filter=".filter-dessert">甜點</li>
				<li data-filter=".filter-beverage">飲料</li>
			</ul>
		</div>
	</div>
</section>

<div class="container-fluid" id="product">
	<div class="row">
		<div class="card col-3 m-3" v-for="product in products">
			<img :src="product.MealImg" class="card-img-top" alt="...">
			<div class="card-body">
				<h5 class="card-title">{{product.productName}}</h5>
				<p class="card-text">$: {{product.unitPrice}}</p>
				<div class="btninput">
					<button v-on:click="minusone"><i class="fa-sharp fa-solid fa-square-minus"></i></button>
					<input type="number" min="0" max="20" value="0" readonly>
					<button v-on:click="addone"><i class="fa-sharp fa-solid fa-square-plus"></i></button>
				</div>
				<a href="#" v-on:click="send(product)" class="btn btn-primary">ADD</a>
			</div>
		</div>
	</div>
</div>


@section Scripts
	{
	<script src="~/axios/axios.min.js"></script>
	<script src="~/orderforhere/startorderjs/bootstrap.min.js"></script>
	<script src="~/orderforhere/startorderjs/jquery-3.3.1.min.js"></script>
	<script src="~/orderforhere/startorderjs/jquery.barfiller.js"></script>
	<script src="~/orderforhere/startorderjs/jquery.magnific-popup.min.js"></script>
	<script src="~/orderforhere/startorderjs/jquery.nicescroll.min.js"></script>
	<script src="~/orderforhere/startorderjs/jquery.slicknav.js"></script>
	<script src="~/orderforhere/startorderjs/jquery.nice-select.min.js"></script>
	<script src="~/orderforhere/startorderjs/main.js"></script>
	<script src="~/orderforhere/startorderjs/owl.carousel.min.js"></script>
	<script>
		const vm = new Vue({
			el: "#product",
			data: {
				products: [],
			},
			methods: {
				GetProducts: function () {
					let self = this;
					axios.get('/api/StartOrderApi/GetAllProducts')
						.then(function (response) {
							self.products = response.data;
						})
						.catch(function (error) {
							console.log(error);
						});
				},
				addone: function (e) {
					if (e.target.parentElement.children[1].value < 20) {
						e.target.parentElement.children[1].value = e.target.parentElement.children[1].value * 1 + 1
					} else {
						e.target.parentElement.children[1].value = 20
					}
				},
				minusone: function (e) {
					if (e.target.parentElement.children[1].value > 0) {
						e.target.parentElement.children[1].value -= 1
					} else {
						e.target.parentElement.children[1].value = 0
					}
				},
				send: function (product) {
					let body = {
						ProductId: product.ProductId,
						ProductName: product.ProductName,
						UnitPrice: product.UnitPrice
					}
					fetch("/api/StartOrderApi/AddToCart", {
						body: JSON.stringify(body),
						headers: { 'content-type': 'application/json' },
						method: 'POST'
					}).then(function (response) { return response.json() })
				}
			},
			mounted: function () {

				this.GetProducts();
			}
		})
	</script>
}